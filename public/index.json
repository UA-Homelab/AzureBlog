[{"content":" Disclaimer: This is NOT about using output from Bicep modules with other modules, but about using the output from Bicep deployments with other, completely different Bicep deployments. Table of Contents Why I wrote this Why is this usefull? How to use past deployment outputs Example Create the log analytics workspace Use the deployments output as policy assignment parameters Conclusion Why I wrote this I wanted to know if I can use the output of past Bicep deployments with new templates but couldn\u0026rsquo;t find any information about this, as most results only talked about using module outputs.\nThis was actually the reason I decided to create this blog. I am hoping this will, at some point, help someone in the same situation.\nWhy is this usefull? You can reference all outputs from your past deployments by only knowing the deployment and output name.\nIn my role, I regularly deploy landing zones and workloads for a variety of customers, each with their own unique requirements. To streamline this process, I‚Äôve developed templates for the platform landing zones (connectivity, management, identity) and governance (management groups, policies and rbac). Some of the platform resources provisioned are later referenced in policies. Example: A policy to send logs to a log analytics workspace in the management subscription will need the workspace as a parameter.\nTo maximize flexibility ‚Äî especially since different customer teams often handle different parts of the landing zone ‚Äî I maintain separate templates for each platform area, as well as for the governance elements. However, this approach introduces a challenge: resource names and configurations can and will vary from customer to customer, which would normally mean updating parameters across every template and increase human errors.\nBy using outputs from previous deployments, I can keep each deployment fully independent while only needing to adjust parameters for the template that actually create the platform landing zones resources. This not only simplifies the process but also makes it easier to manage variations between customers without sacrificing modularity or maintainability.\nHow to use past deployment outputs After some frustrating time searching for a solution, I was thinking that probably the deployments (that you can see on subscripions and resource groups) are also just ARM-Resources and therefore it should be possible to define them as existing resources in templates.\nIt turns out that this was the solution! You can just add deployments as existing resources to your bicep file and then access all output values, that have been defined. Here are some examples:\nUse a deployment from the same subscription you\u0026rsquo;re deploying to: param deploymentName string = \u0026#39;\u0026lt;insert_deployment_name\u0026gt;\u0026#39; resource deployment string \u0026#39;Microsoft.Resources/deployments@2025-04-01\u0026#39; existing = { name: deploymentName } Use a deployment from another subscripion: param deploymentName string = \u0026#39;\u0026lt;insert_deployment_name\u0026gt;\u0026#39; param subscriptionId string = \u0026#39;\u0026lt;insert_subscription_id\u0026#39; resource deployment \u0026#39;Microsoft.Resources/deployments@2025-04-01\u0026#39; existing = { scope: subscription(subscriptionId) name: deploymentName } Use a deployment from a resource group in the same subscription your\u0026rsquo;re deploying to: param deploymentName string = \u0026#39;\u0026lt;insert_deployment_name\u0026gt;\u0026#39; param resourceGroupName string = \u0026#39;\u0026lt;insert_resource_group_name\u0026#39; resource deployment \u0026#39;Microsoft.Resources/deployments@2025-04-01\u0026#39; existing = { scope: resourceGroup(resourceGroupName) name: deploymentName } Use a deployment from a resource group in a different subscription: param deploymentName string = \u0026#39;\u0026lt;insert_deployment_name\u0026gt;\u0026#39; param subscriptionId string = \u0026#39;\u0026lt;insert_subscription_id\u0026#39; param resourceGroupName string = \u0026#39;\u0026lt;insert_resource_group_name\u0026#39; resource deployment \u0026#39;Microsoft.Resources/deployments@2025-04-01\u0026#39; existing = { scope: resourceGroup(subscriptionId, resourceGroupName) name: deploymentName } After declaring the existing deployment like that, you can access the outputs as follows: var deploymentOutput = deployment.properties.outputs.\u0026lt;outputName\u0026gt;.value Example As an example I wrote a bicep template that creates a log analytics workspace. Another template uses the output of this deployment to assign a policy that sends the subscriptions activity logs to to this workspace.\nThe files can be found on my GitHub.\nCreate the log analytics workspace This is very straight forward. I used Azure Verified Modules (AVM) to create a log analytics workspace. The important part here is to define the outputs, that you want to use later, in the main.bicep.\ntargetScope = \u0026#39;subscription\u0026#39; param applicationName string = \u0026#39;Monitor\u0026#39; param location string @allowed([ \u0026#39;Prod\u0026#39; \u0026#39;Test\u0026#39; \u0026#39;Dev\u0026#39; \u0026#39;QA\u0026#39; \u0026#39;Sandbox\u0026#39; \u0026#39;Staging\u0026#39; \u0026#39;Demo\u0026#39; ]) param environment string param index string = \u0026#39;001\u0026#39; param logAnalyticsWorkspaceSkuName string = \u0026#39;PerGB2018\u0026#39; var resourceNameSuffix = toLower(\u0026#39;${replace(applicationName, \u0026#39; \u0026#39;, \u0026#39;\u0026#39;)}-${environment}-${location}-${index}\u0026#39;) var logAnalyticsWorkspaceName = \u0026#39;law-${resourceNameSuffix}\u0026#39; var resourceGroupName = \u0026#39;rg-${resourceNameSuffix}\u0026#39; var tags = { Application: applicationName Environment: environment templateSource: \u0026#39;azureblog.urdl.me\u0026#39; } resource resourceGroup \u0026#39;Microsoft.Resources/resourceGroups@2021-04-01\u0026#39; = { name: resourceGroupName location: location tags: tags } module logAnalyticsWorkspace \u0026#39;br/public:avm/res/operational-insights/workspace:0.14.2\u0026#39; = { name: \u0026#39;Deploy-${logAnalyticsWorkspaceName}\u0026#39; scope: resourceGroup params: { name: logAnalyticsWorkspaceName location: location skuName: logAnalyticsWorkspaceSkuName tags: tags } } output logAnalyticsWorkspaceName string = logAnalyticsWorkspace.outputs.name output logAnalyticsWorkspaceId string = logAnalyticsWorkspace.outputs.resourceId output resourceGroupName string = resourceGroup.name output resourceGroupId string = resourceGroup.id output subscriptionId string = subscription().subscriptionId Use the deployments output as policy assignment parameters Now the interesting part! We can use the deployment name, that is defined in the PowerShell command used to deploy the template, to access this deployments outputs.\ntargetScope = \u0026#39;subscription\u0026#39; param location string @description(\u0026#39;The subscription ID where the Log Analytics Workspace is deployed. If not provided, the current subscription ID will be used. Override this value, if the workspace is in a different subscription.\u0026#39;) param logAnalyticsWorkspaceSubscriptionId string = subscription().subscriptionId @description(\u0026#39;The name of the deployment that created the Log Analytics Workspace. The default value assumes the deployment name follows the pattern \u0026#34;Deploy-LogAnalyticsWorkspace-$(location)\u0026#34;.\u0026#39;) param logAnalyticsWorkspaceDeploymentName string = \u0026#39;Deploy-LogAnalyticsWorkspace-${location}\u0026#39; var policyAssignmentDisplayName = \u0026#39;Configure Azure Activity logs to stream to specified Log Analytics workspace\u0026#39; var policyDefinitionId = \u0026#39;/providers/Microsoft.Authorization/policyDefinitions/2465583e-4e78-4c15-b6be-a36cbc7c8b0f\u0026#39; resource existingLogAnalyticsDeployment \u0026#39;Microsoft.Resources/deployments@2021-04-01\u0026#39; existing = { name: logAnalyticsWorkspaceDeploymentName scope: subscription(logAnalyticsWorkspaceSubscriptionId) } module assignPolicy \u0026#39;modules/policyAssignmentSubscriptionScope.bicep\u0026#39; = { scope: subscription() params: { location: location name: guid(subscription().subscriptionId, policyDefinitionId, logAnalyticsWorkspaceDeploymentName, location) displayName: policyAssignmentDisplayName policyDefinitionId: policyDefinitionId parameters: { logAnalytics: { value: existingLogAnalyticsDeployment.properties.outputs.logAnalyticsWorkspaceId.value } } } } output policyAssignmentId string = assignPolicy.outputs.policyAssignmentId output policyAssignmentName string = assignPolicy.outputs.policyAssignmentName output policyAssignmentPrincipalId string = assignPolicy.outputs.policyAssignmentPrincipalId Conclusion The ability to use the outputs of past deployments is a great feature that can come in very handy.\nThis example was very simple, but if you deploy a whole connectivity subscription with Bastion, Azure Firewall and VPN-Gateway, you may need lots of parameters with following deployments that have dependencies (like route tables that need the firewall private IP, spoke VNETs that need the hubs resource id, NSGs that need the bastion subnet range, etc.).\nSo instead of all those parameters, you only need two (the deployment name and subscription id) and can simply access the output values.\n","permalink":"https://azureblog.urdl.me/posts/bicep-use-outputs-from-past-deployments/","summary":"\u003cdiv style=\"color: #5e5b5bff; border-left: 4px solid #f39c12; background: #fffbe6; padding: 16px; margin: 16px 0; border-radius: 4px;\"\u003e\n  \u003cstrong\u003eDisclaimer:\u003c/strong\u003e This is \u003cb\u003eNOT\u003c/b\u003e about using output from Bicep modules with other modules, but about using the output from Bicep deployments with other, completely different Bicep deployments.\n\u003c/div\u003e\n\u003ch2 id=\"table-of-contents\"\u003eTable of Contents\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/posts/bicep-use-outputs-from-past-deployments/#why-i-wrote-this\"\u003eWhy I wrote this\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/posts/bicep-use-outputs-from-past-deployments/#why-is-this-usefull\"\u003eWhy is this usefull?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/posts/bicep-use-outputs-from-past-deployments/#how-to-use-past-deployment-outputs\"\u003eHow to use past deployment outputs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/posts/bicep-use-outputs-from-past-deployments/#example\"\u003eExample\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/posts/bicep-use-outputs-from-past-deployments/#create-the-log-analytics-workspace\"\u003eCreate the log analytics workspace\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/posts/bicep-use-outputs-from-past-deployments/#use-the-deployments-output-as-policy-assignment-parameters\"\u003eUse the deployments output as policy assignment parameters\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/posts/bicep-use-outputs-from-past-deployments/#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"why-i-wrote-this\"\u003eWhy I wrote this\u003c/h2\u003e\n\u003cp\u003eI wanted to know if I can use the output of past Bicep deployments with new templates but couldn\u0026rsquo;t find any information about this, as most results only talked about using module outputs.\u003c/p\u003e","title":"Use outputs from past deployments with Bicep"},{"content":"If you\u0026rsquo;d like to connect or reach out, the best way is through LinkedIn.\nI‚Äôm always open to networking, feedback, or just a friendly chat.\n","permalink":"https://azureblog.urdl.me/contact/","summary":"\u003cp\u003eIf you\u0026rsquo;d like to connect or reach out, the best way is through \u003ca href=\"https://www.linkedin.com/in/alexander-urdl/\"\u003eLinkedIn\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eI‚Äôm always open to networking, feedback, or just a friendly chat.\u003c/p\u003e","title":"üì¨ Get in Touch"},{"content":" I‚Äôm Alexander Urdl, a -year-old tech enthusiast with a passion for solving complex problems, building solutions and see them working (at some point at least). I have years of experience working in IT. Today, I work as an Azure Solution Architect, specializing in Azure Infrastructure and Infrastructure as Code for the past years. When I‚Äôm done working, I spent time with my hobbies:\nüé∂ Making music\nüèπ Practicing archery\nüå± Tending to my urban garden\nü•æ Exploring nature through hiking and biking\nüíª Programming for fun and personal projects\nüè† Automating my home with Home Assistant\n","permalink":"https://azureblog.urdl.me/about-me/","summary":"\u003cstyle\u003e\n  .about-container {\n    display: flex;\n    align-items: flex-start;\n    gap: 2rem;\n  }\n\n  .profile-pic {\n    width: 200px;\n    flex-shrink: 0;\n  }\n\n  @media (max-width: 600px) {\n    .profile-pic {\n      width: 200px;\n      margin-bottom: 0px;\n      padding-bottom: 0;\n    }\n\n    .about-container {\n      flex-direction: column;\n      align-items: center;\n      margin-top: 0;\n      padding-top: 0;\n      margin-bottom: 2rem;\n    }\n  }\n\u003c/style\u003e\n\u003cdiv class=\"about-container\"\u003e\n  \u003cimg class=\"profile-pic\" src=\"/me.png\" alt=\"A picture of me\"\u003e\n  \u003cdiv class=\"aboutMyWork\"\u003e\n    \u003cbr\u003e\n    I‚Äôm Alexander Urdl, a \u003cspan id=\"age\"\u003e\u003c/span\u003e-year-old tech enthusiast with a passion for solving complex problems, building solutions and see them working (at some point at least).\n    \u003cbr\u003e\u003cbr\u003e\n    I have \u003cspan id=\"experience\"\u003e\u003c/span\u003e years of experience working in IT. Today, I work as an Azure Solution Architect, specializing in Azure Infrastructure and Infrastructure as Code for the past \u003cspan id=\"cloudExperience\"\u003e\u003c/span\u003e years.\n  \u003c/div\u003e\n\u003c/div\u003e\n\u003cp\u003eWhen I‚Äôm done working, I spent time with my hobbies:\u003c/p\u003e","title":"About Me"}]